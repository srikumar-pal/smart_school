<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Smart School</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="css/style.css">

<style>
/* EXTRA DASHBOARD DESIGN */
.dashboard-card {
    border-radius: 20px;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    transition: 0.3s;
}
.dashboard-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}
.icon-circle {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    color: white;
}
.bg-blue { background: linear-gradient(45deg,#4facfe,#00f2fe); }
.bg-green { background: linear-gradient(45deg,#43e97b,#38f9d7); }
.bg-orange { background: linear-gradient(45deg,#fa709a,#fee140); }
.bg-red { background: linear-gradient(45deg, #8375ff,#ff7eb3); }
</style>
</head>

<body>

<!-- ğŸ”’ PROTECTION -->
<script>
(function(){
    if(!localStorage.getItem("userRole")){
        alert("Please login first!");
        window.location.href="login.html";
    }
})();
</script>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary">
<div class="container">
    <a class="navbar-brand fw-bold" href="index.html">ğŸ« Smart School</a>
    <button onclick="logout()" class="btn btn-danger btn-sm">Logout</button>
</div>
</nav>

<!-- HEADER -->
<section class="student-header">
<div class="container text-center text-white">
    <h1 class="fw-bold">ğŸ“Š Admin Dashboard</h1>
    <p>Modern School Management Overview</p>
</div>
</section>

<!-- STATS -->
<section class="container my-5">
<div class="row g-4">

<div class="col-md-3">
<div class="dashboard-card p-4 text-center">
<div class="icon-circle bg-blue mx-auto mb-2">ğŸ“</div>
<h6>Total Students</h6>
<h2 id="totalStudents" class="fw-bold text-primary">0</h2>
</div>
</div>

<div class="col-md-3">
<div class="dashboard-card p-4 text-center">
<div class="icon-circle bg-green mx-auto mb-2">ğŸ«</div>
<h6>Classes</h6>
<h2 class="fw-bold text-success">12</h2>
</div>
</div>

<div class="col-md-3">
<div class="dashboard-card p-4 text-center">
<div class="icon-circle bg-orange mx-auto mb-2">ğŸ§‘â€ğŸ«</div>
<h6>Teachers</h6>
<h2 class="fw-bold text-warning">50</h2>
</div>
</div>

<div class="col-md-3">
<div class="dashboard-card p-4 text-center">
<div class="icon-circle bg-red mx-auto mb-2">ğŸ‰</div>
<h6>Events</h6>
<h2 class="fw-bold text-danger">3</h2>
</div>
</div>

</div>
</section>

<!-- CHART + RECENT -->
<section class="container my-5">
<div class="row g-4">

<div class="col-md-7">
<div class="dashboard-card p-4">
<h5 class="fw-bold mb-3">ğŸ“Š Students Per Class</h5>
<canvas id="classChart"></canvas>
</div>
</div>

<div class="col-md-5">
<div class="dashboard-card p-4">
<h5 class="fw-bold mb-3">ğŸ•’ Recent Students</h5>
<ul id="recentStudents" class="list-group list-group-flush"></ul>
</div>
</div>

</div>
</section>

<footer class="footer">
Â© 2026 Smart School
</footer>

<!-- SCRIPT -->
<script>
function logout(){
    localStorage.removeItem("userRole");
    window.location.href="login.html";
}

document.addEventListener("DOMContentLoaded",function(){
    const students = JSON.parse(localStorage.getItem("students")) || [];
    document.getElementById("totalStudents").innerText = students.length;

    const classCount = {};
    students.forEach(s=>{
        classCount[s.className]=(classCount[s.className]||0)+1;
    });

    new Chart(document.getElementById("classChart"),{
        type:"bar",
        data:{
            labels:Object.keys(classCount),
            datasets:[{
                label:"Students",
                data:Object.values(classCount),
                backgroundColor:"#49fd0d"
            }]
        }
    });

    const recent=document.getElementById("recentStudents");
    students.slice(-5).reverse().forEach(s=>{
        const li=document.createElement("li");
        li.className="list-group-item";
        li.innerHTML=`<strong>${s.name}</strong><br><small>${s.className}</small>`;
        recent.appendChild(li);
    });
});
</script>

</body>
</html>
